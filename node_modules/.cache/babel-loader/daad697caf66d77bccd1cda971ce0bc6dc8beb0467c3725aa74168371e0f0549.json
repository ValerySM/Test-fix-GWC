{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nconst GlobalScore = {\n  totalClicks: 0,\n  gameScores: {\n    appleCatcher: 0,\n    purblePairs: 0\n  },\n  getTotalClicks: function () {\n    return this.totalClicks;\n  },\n  setTotalClicks: function (newTotal) {\n    this.totalClicks = newTotal;\n    this.saveToLocalStorage();\n  },\n  addGameScore: function (gameType, score) {\n    if (!this.gameScores) {\n      this.gameScores = {\n        appleCatcher: 0,\n        purblePairs: 0\n      };\n    }\n    if (gameType in this.gameScores) {\n      this.gameScores[gameType] = score;\n      this.totalClicks += score;\n      this.saveToLocalStorage();\n    } else {\n      console.error('Неизвестный тип игры:', gameType);\n    }\n  },\n  saveToLocalStorage: function () {\n    localStorage.setItem('globalScore', JSON.stringify({\n      totalClicks: this.totalClicks,\n      gameScores: this.gameScores\n    }));\n  },\n  loadFromLocalStorage: function () {\n    const savedScore = localStorage.getItem('globalScore');\n    if (savedScore) {\n      const parsedScore = JSON.parse(savedScore);\n      this.totalClicks = parsedScore.totalClicks || 0;\n      this.gameScores = parsedScore.gameScores || {\n        appleCatcher: 0,\n        purblePairs: 0\n      };\n    } else {\n      this.totalClicks = 0;\n      this.gameScores = {\n        appleCatcher: 0,\n        purblePairs: 0\n      };\n    }\n  },\n  useGlobalScore: _s(function () {\n    _s();\n    const [score, setScore] = useState(this.totalClicks);\n    useEffect(() => {\n      this.loadFromLocalStorage();\n      setScore(this.totalClicks);\n    }, []);\n    return [score, newTotal => {\n      this.setTotalClicks(newTotal);\n      setScore(this.totalClicks);\n    }, (gameType, gameScore) => {\n      this.addGameScore(gameType, gameScore);\n      setScore(this.totalClicks);\n    }];\n  }, \"iz/r3kakB9iK6o95IiH5h/1XHzo=\")\n};\nexport default GlobalScore;","map":{"version":3,"names":["useState","useEffect","GlobalScore","totalClicks","gameScores","appleCatcher","purblePairs","getTotalClicks","setTotalClicks","newTotal","saveToLocalStorage","addGameScore","gameType","score","console","error","localStorage","setItem","JSON","stringify","loadFromLocalStorage","savedScore","getItem","parsedScore","parse","useGlobalScore","_s","setScore","gameScore"],"sources":["C:/Users/valery-sm/project/Demo-GWC/frontend/src/Universes/EWI/src/GlobalScore.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\n\r\nconst GlobalScore = {\r\n  totalClicks: 0,\r\n  gameScores: {\r\n    appleCatcher: 0,\r\n    purblePairs: 0\r\n  },\r\n\r\n  getTotalClicks: function() {\r\n    return this.totalClicks;\r\n  },\r\n\r\n  setTotalClicks: function(newTotal) {\r\n    this.totalClicks = newTotal;\r\n    this.saveToLocalStorage();\r\n  },\r\n\r\n  addGameScore: function(gameType, score) {\r\n    if (!this.gameScores) {\r\n      this.gameScores = {\r\n        appleCatcher: 0,\r\n        purblePairs: 0\r\n      };\r\n    }\r\n    if (gameType in this.gameScores) {\r\n      this.gameScores[gameType] = score;\r\n      this.totalClicks += score;\r\n      this.saveToLocalStorage();\r\n    } else {\r\n      console.error('Неизвестный тип игры:', gameType);\r\n    }\r\n  },\r\n\r\n  saveToLocalStorage: function() {\r\n    localStorage.setItem('globalScore', JSON.stringify({\r\n      totalClicks: this.totalClicks,\r\n      gameScores: this.gameScores\r\n    }));\r\n  },\r\n\r\n  loadFromLocalStorage: function() {\r\n    const savedScore = localStorage.getItem('globalScore');\r\n    if (savedScore) {\r\n      const parsedScore = JSON.parse(savedScore);\r\n      this.totalClicks = parsedScore.totalClicks || 0;\r\n      this.gameScores = parsedScore.gameScores || {\r\n        appleCatcher: 0,\r\n        purblePairs: 0\r\n      };\r\n    } else {\r\n      this.totalClicks = 0;\r\n      this.gameScores = {\r\n        appleCatcher: 0,\r\n        purblePairs: 0\r\n      };\r\n    }\r\n  },\r\n\r\n  useGlobalScore: function() {\r\n    const [score, setScore] = useState(this.totalClicks);\r\n\r\n    useEffect(() => {\r\n      this.loadFromLocalStorage();\r\n      setScore(this.totalClicks);\r\n    }, []);\r\n\r\n    return [\r\n      score,\r\n      (newTotal) => {\r\n        this.setTotalClicks(newTotal);\r\n        setScore(this.totalClicks);\r\n      },\r\n      (gameType, gameScore) => {\r\n        this.addGameScore(gameType, gameScore);\r\n        setScore(this.totalClicks);\r\n      }\r\n    ];\r\n  }\r\n};\r\n\r\nexport default GlobalScore;"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,MAAMC,WAAW,GAAG;EAClBC,WAAW,EAAE,CAAC;EACdC,UAAU,EAAE;IACVC,YAAY,EAAE,CAAC;IACfC,WAAW,EAAE;EACf,CAAC;EAEDC,cAAc,EAAE,SAAAA,CAAA,EAAW;IACzB,OAAO,IAAI,CAACJ,WAAW;EACzB,CAAC;EAEDK,cAAc,EAAE,SAAAA,CAASC,QAAQ,EAAE;IACjC,IAAI,CAACN,WAAW,GAAGM,QAAQ;IAC3B,IAAI,CAACC,kBAAkB,CAAC,CAAC;EAC3B,CAAC;EAEDC,YAAY,EAAE,SAAAA,CAASC,QAAQ,EAAEC,KAAK,EAAE;IACtC,IAAI,CAAC,IAAI,CAACT,UAAU,EAAE;MACpB,IAAI,CAACA,UAAU,GAAG;QAChBC,YAAY,EAAE,CAAC;QACfC,WAAW,EAAE;MACf,CAAC;IACH;IACA,IAAIM,QAAQ,IAAI,IAAI,CAACR,UAAU,EAAE;MAC/B,IAAI,CAACA,UAAU,CAACQ,QAAQ,CAAC,GAAGC,KAAK;MACjC,IAAI,CAACV,WAAW,IAAIU,KAAK;MACzB,IAAI,CAACH,kBAAkB,CAAC,CAAC;IAC3B,CAAC,MAAM;MACLI,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEH,QAAQ,CAAC;IAClD;EACF,CAAC;EAEDF,kBAAkB,EAAE,SAAAA,CAAA,EAAW;IAC7BM,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEC,IAAI,CAACC,SAAS,CAAC;MACjDhB,WAAW,EAAE,IAAI,CAACA,WAAW;MAC7BC,UAAU,EAAE,IAAI,CAACA;IACnB,CAAC,CAAC,CAAC;EACL,CAAC;EAEDgB,oBAAoB,EAAE,SAAAA,CAAA,EAAW;IAC/B,MAAMC,UAAU,GAAGL,YAAY,CAACM,OAAO,CAAC,aAAa,CAAC;IACtD,IAAID,UAAU,EAAE;MACd,MAAME,WAAW,GAAGL,IAAI,CAACM,KAAK,CAACH,UAAU,CAAC;MAC1C,IAAI,CAAClB,WAAW,GAAGoB,WAAW,CAACpB,WAAW,IAAI,CAAC;MAC/C,IAAI,CAACC,UAAU,GAAGmB,WAAW,CAACnB,UAAU,IAAI;QAC1CC,YAAY,EAAE,CAAC;QACfC,WAAW,EAAE;MACf,CAAC;IACH,CAAC,MAAM;MACL,IAAI,CAACH,WAAW,GAAG,CAAC;MACpB,IAAI,CAACC,UAAU,GAAG;QAChBC,YAAY,EAAE,CAAC;QACfC,WAAW,EAAE;MACf,CAAC;IACH;EACF,CAAC;EAEDmB,cAAc,EAAAC,EAAA,CAAE,YAAW;IAAAA,EAAA;IACzB,MAAM,CAACb,KAAK,EAAEc,QAAQ,CAAC,GAAG3B,QAAQ,CAAC,IAAI,CAACG,WAAW,CAAC;IAEpDF,SAAS,CAAC,MAAM;MACd,IAAI,CAACmB,oBAAoB,CAAC,CAAC;MAC3BO,QAAQ,CAAC,IAAI,CAACxB,WAAW,CAAC;IAC5B,CAAC,EAAE,EAAE,CAAC;IAEN,OAAO,CACLU,KAAK,EACJJ,QAAQ,IAAK;MACZ,IAAI,CAACD,cAAc,CAACC,QAAQ,CAAC;MAC7BkB,QAAQ,CAAC,IAAI,CAACxB,WAAW,CAAC;IAC5B,CAAC,EACD,CAACS,QAAQ,EAAEgB,SAAS,KAAK;MACvB,IAAI,CAACjB,YAAY,CAACC,QAAQ,EAAEgB,SAAS,CAAC;MACtCD,QAAQ,CAAC,IAAI,CAACxB,WAAW,CAAC;IAC5B,CAAC,CACF;EACH,CAAC;AACH,CAAC;AAED,eAAeD,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}