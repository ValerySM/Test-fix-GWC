{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\valery-sm\\\\project\\\\Demo-GWC\\\\frontend\\\\src\\\\Universes\\\\EWI\\\\src\\\\games\\\\apple-game\\\\AppleCatcher.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport './AppleCatcher.css';\n\n// Функция для загрузки изображения с обработкой ошибок\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst loadImage = src => {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n    img.src = src;\n  });\n};\nconst AppleCatcher = ({\n  onGameOver\n}) => {\n  _s();\n  const [score, setScore] = useState(0);\n  const [time, setTime] = useState(60);\n  const [apples, setApples] = useState([]);\n  const [playerPosition, setPlayerPosition] = useState(50);\n  const [gameStarted, setGameStarted] = useState(false);\n  const [showResult, setShowResult] = useState(false);\n  const [imagesLoaded, setImagesLoaded] = useState(false);\n  const canvasRef = useRef(null);\n  const backgroundMusicRef = useRef(null);\n  const buttonClickSoundRef = useRef(null);\n  const lastUpdateTimeRef = useRef(0);\n  const animationFrameRef = useRef(null);\n  const imagesRef = useRef({\n    goodApple: null,\n    rottenApple: null,\n    catcher: null\n  });\n  useEffect(() => {\n    const loadImages = async () => {\n      try {\n        const [goodApple, rottenApple, catcher] = await Promise.all([loadImage('./img/good-apple.png'), loadImage('./img/rotten-apple.png'), loadImage('./img/catcher.png')]);\n        imagesRef.current = {\n          goodApple,\n          rottenApple,\n          catcher\n        };\n        setImagesLoaded(true);\n      } catch (error) {\n        console.error(\"Failed to load images:\", error);\n        // Здесь можно добавить обработку ошибки загрузки изображений\n      }\n    };\n    loadImages();\n    const canvas = canvasRef.current;\n    if (canvas) {\n      canvas.width = window.innerWidth;\n      canvas.height = window.innerHeight;\n    }\n    backgroundMusicRef.current = new Audio('./audio/background-music.mp3');\n    backgroundMusicRef.current.loop = true;\n    buttonClickSoundRef.current = new Audio('./audio/button-click.mp3');\n    return () => {\n      if (backgroundMusicRef.current) {\n        backgroundMusicRef.current.pause();\n        backgroundMusicRef.current = null;\n      }\n      if (buttonClickSoundRef.current) {\n        buttonClickSoundRef.current = null;\n      }\n    };\n  }, []);\n  const checkCollisions = useCallback(() => {\n    setApples(prevApples => prevApples.filter(apple => {\n      if (apple.y > 70 && apple.y < 85 && Math.abs(apple.x - playerPosition) < 15) {\n        const scoreChange = apple.type === 'good' ? 10 : -20;\n        setScore(prevScore => prevScore + scoreChange);\n        return false;\n      }\n      return apple.y < 100;\n    }));\n  }, [playerPosition]);\n  const drawGame = useCallback(() => {\n    const canvas = canvasRef.current;\n    if (!canvas || !imagesLoaded) return;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Отрисовка яблок\n    apples.forEach(apple => {\n      const img = apple.type === 'good' ? imagesRef.current.goodApple : imagesRef.current.rottenApple;\n      ctx.drawImage(img, apple.x * canvas.width / 100, apple.y * canvas.height / 100, 30, 30);\n    });\n\n    // Отрисовка игрока\n    ctx.drawImage(imagesRef.current.catcher, playerPosition * canvas.width / 100 - 45, canvas.height - 90, 90, 90);\n\n    // Отрисовка счета и времени\n    ctx.font = '20px Arial';\n    ctx.fillStyle = 'white';\n    ctx.fillText(`Score: ${score}`, 10, 30);\n    ctx.fillText(`Time: ${time}`, canvas.width - 100, 30);\n  }, [apples, playerPosition, score, time, imagesLoaded]);\n  const gameLoop = useCallback(timestamp => {\n    if (!lastUpdateTimeRef.current) {\n      lastUpdateTimeRef.current = timestamp;\n    }\n    const deltaTime = timestamp - lastUpdateTimeRef.current;\n    if (deltaTime >= 33) {\n      // Примерно 30 FPS для мобильных устройств\n      lastUpdateTimeRef.current = timestamp;\n      setApples(prevApples => {\n        const newApples = prevApples.map(apple => ({\n          ...apple,\n          y: apple.y + 0.5 * (deltaTime / 33)\n        }));\n        if (Math.random() < 0.02 && newApples.length < 4) {\n          newApples.push({\n            id: Date.now(),\n            x: Math.random() * 100,\n            y: 0,\n            type: Math.random() > 0.2 ? 'good' : 'rotten'\n          });\n        }\n        return newApples.filter(apple => apple.y < 100);\n      });\n      checkCollisions();\n      drawGame();\n    }\n    animationFrameRef.current = requestAnimationFrame(gameLoop);\n  }, [checkCollisions, drawGame]);\n  useEffect(() => {\n    if (gameStarted && imagesLoaded) {\n      if (backgroundMusicRef.current) {\n        backgroundMusicRef.current.play().catch(error => console.error(\"Error playing audio:\", error));\n      }\n      animationFrameRef.current = requestAnimationFrame(gameLoop);\n    } else {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n      if (backgroundMusicRef.current) {\n        backgroundMusicRef.current.pause();\n      }\n    }\n    return () => {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, [gameStarted, gameLoop, imagesLoaded]);\n  useEffect(() => {\n    if (gameStarted && time > 0) {\n      const timer = setInterval(() => {\n        setTime(prevTime => prevTime - 1);\n      }, 1000);\n      return () => clearInterval(timer);\n    } else if (time === 0) {\n      endGame();\n    }\n  }, [gameStarted, time]);\n  const movePlayer = useCallback(e => {\n    if (gameStarted) {\n      const touch = e.touches[0];\n      const newPosition = touch.clientX / window.innerWidth * 100;\n      setPlayerPosition(newPosition);\n    }\n  }, [gameStarted]);\n  const startGame = () => {\n    setGameStarted(true);\n    setScore(0);\n    setTime(60);\n    setApples([]);\n    setShowResult(false);\n    lastUpdateTimeRef.current = 0;\n    if (buttonClickSoundRef.current) {\n      buttonClickSoundRef.current.play().catch(error => console.error(\"Error playing audio:\", error));\n    }\n  };\n  const endGame = () => {\n    setGameStarted(false);\n    setShowResult(true);\n    if (backgroundMusicRef.current) {\n      backgroundMusicRef.current.pause();\n    }\n  };\n  const handleResultClose = () => {\n    setShowResult(false);\n    onGameOver(score);\n    if (buttonClickSoundRef.current) {\n      buttonClickSoundRef.current.play().catch(error => console.error(\"Error playing audio:\", error));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"apple-catcher\",\n    onTouchMove: movePlayer,\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }, this), !imagesLoaded && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 31\n    }, this), !gameStarted && !showResult && imagesLoaded && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"start-button\",\n      onClick: startGame,\n      children: \"Start Game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 17\n    }, this), showResult && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"result-modal\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"result-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Game end!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Your score: \", score]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleResultClose,\n          children: \"OK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 218,\n    columnNumber: 9\n  }, this);\n};\n_s(AppleCatcher, \"swlXdrrg3exoLG1S2GDFPx/M9R0=\");\n_c = AppleCatcher;\nexport default AppleCatcher;\nvar _c;\n$RefreshReg$(_c, \"AppleCatcher\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","jsxDEV","_jsxDEV","loadImage","src","Promise","resolve","reject","img","Image","onload","onerror","AppleCatcher","onGameOver","_s","score","setScore","time","setTime","apples","setApples","playerPosition","setPlayerPosition","gameStarted","setGameStarted","showResult","setShowResult","imagesLoaded","setImagesLoaded","canvasRef","backgroundMusicRef","buttonClickSoundRef","lastUpdateTimeRef","animationFrameRef","imagesRef","goodApple","rottenApple","catcher","loadImages","all","current","error","console","canvas","width","window","innerWidth","height","innerHeight","Audio","loop","pause","checkCollisions","prevApples","filter","apple","y","Math","abs","x","scoreChange","type","prevScore","drawGame","ctx","getContext","clearRect","forEach","drawImage","font","fillStyle","fillText","gameLoop","timestamp","deltaTime","newApples","map","random","length","push","id","Date","now","requestAnimationFrame","play","catch","cancelAnimationFrame","timer","setInterval","prevTime","clearInterval","endGame","movePlayer","e","touch","touches","newPosition","clientX","startGame","handleResultClose","className","onTouchMove","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["C:/Users/valery-sm/project/Demo-GWC/frontend/src/Universes/EWI/src/games/apple-game/AppleCatcher.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport './AppleCatcher.css';\r\n\r\n// Функция для загрузки изображения с обработкой ошибок\r\nconst loadImage = (src) => {\r\n    return new Promise((resolve, reject) => {\r\n        const img = new Image();\r\n        img.onload = () => resolve(img);\r\n        img.onerror = reject;\r\n        img.src = src;\r\n    });\r\n};\r\n\r\nconst AppleCatcher = ({ onGameOver }) => {\r\n    const [score, setScore] = useState(0);\r\n    const [time, setTime] = useState(60);\r\n    const [apples, setApples] = useState([]);\r\n    const [playerPosition, setPlayerPosition] = useState(50);\r\n    const [gameStarted, setGameStarted] = useState(false);\r\n    const [showResult, setShowResult] = useState(false);\r\n    const [imagesLoaded, setImagesLoaded] = useState(false);\r\n\r\n    const canvasRef = useRef(null);\r\n    const backgroundMusicRef = useRef(null);\r\n    const buttonClickSoundRef = useRef(null);\r\n    const lastUpdateTimeRef = useRef(0);\r\n    const animationFrameRef = useRef(null);\r\n    const imagesRef = useRef({\r\n        goodApple: null,\r\n        rottenApple: null,\r\n        catcher: null\r\n    });\r\n\r\n    useEffect(() => {\r\n        const loadImages = async () => {\r\n            try {\r\n                const [goodApple, rottenApple, catcher] = await Promise.all([\r\n                    loadImage('./img/good-apple.png'),\r\n                    loadImage('./img/rotten-apple.png'),\r\n                    loadImage('./img/catcher.png')\r\n                ]);\r\n                imagesRef.current = { goodApple, rottenApple, catcher };\r\n                setImagesLoaded(true);\r\n            } catch (error) {\r\n                console.error(\"Failed to load images:\", error);\r\n                // Здесь можно добавить обработку ошибки загрузки изображений\r\n            }\r\n        };\r\n\r\n        loadImages();\r\n\r\n        const canvas = canvasRef.current;\r\n        if (canvas) {\r\n            canvas.width = window.innerWidth;\r\n            canvas.height = window.innerHeight;\r\n        }\r\n\r\n        backgroundMusicRef.current = new Audio('./audio/background-music.mp3');\r\n        backgroundMusicRef.current.loop = true;\r\n        buttonClickSoundRef.current = new Audio('./audio/button-click.mp3');\r\n\r\n        return () => {\r\n            if (backgroundMusicRef.current) {\r\n                backgroundMusicRef.current.pause();\r\n                backgroundMusicRef.current = null;\r\n            }\r\n            if (buttonClickSoundRef.current) {\r\n                buttonClickSoundRef.current = null;\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    const checkCollisions = useCallback(() => {\r\n        setApples((prevApples) =>\r\n            prevApples.filter((apple) => {\r\n                if (\r\n                    apple.y > 70 &&\r\n                    apple.y < 85 &&\r\n                    Math.abs(apple.x - playerPosition) < 15\r\n                ) {\r\n                    const scoreChange = apple.type === 'good' ? 10 : -20;\r\n                    setScore((prevScore) => prevScore + scoreChange);\r\n                    return false;\r\n                }\r\n                return apple.y < 100;\r\n            })\r\n        );\r\n    }, [playerPosition]);\r\n\r\n    const drawGame = useCallback(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas || !imagesLoaded) return;\r\n\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        // Отрисовка яблок\r\n        apples.forEach((apple) => {\r\n            const img = apple.type === 'good' ? imagesRef.current.goodApple : imagesRef.current.rottenApple;\r\n            ctx.drawImage(img, apple.x * canvas.width / 100, apple.y * canvas.height / 100, 30, 30);\r\n        });\r\n\r\n        // Отрисовка игрока\r\n        ctx.drawImage(imagesRef.current.catcher, playerPosition * canvas.width / 100 - 45, canvas.height - 90, 90, 90);\r\n\r\n        // Отрисовка счета и времени\r\n        ctx.font = '20px Arial';\r\n        ctx.fillStyle = 'white';\r\n        ctx.fillText(`Score: ${score}`, 10, 30);\r\n        ctx.fillText(`Time: ${time}`, canvas.width - 100, 30);\r\n    }, [apples, playerPosition, score, time, imagesLoaded]);\r\n\r\n    const gameLoop = useCallback((timestamp) => {\r\n        if (!lastUpdateTimeRef.current) {\r\n            lastUpdateTimeRef.current = timestamp;\r\n        }\r\n        const deltaTime = timestamp - lastUpdateTimeRef.current;\r\n        \r\n        if (deltaTime >= 33) { // Примерно 30 FPS для мобильных устройств\r\n            lastUpdateTimeRef.current = timestamp;\r\n            \r\n            setApples((prevApples) => {\r\n                const newApples = prevApples.map((apple) => ({\r\n                    ...apple,\r\n                    y: apple.y + 0.5 * (deltaTime / 33),\r\n                }));\r\n        \r\n                if (Math.random() < 0.02 && newApples.length < 4) {\r\n                    newApples.push({\r\n                        id: Date.now(),\r\n                        x: Math.random() * 100,\r\n                        y: 0,\r\n                        type: Math.random() > 0.2 ? 'good' : 'rotten',\r\n                    });\r\n                }\r\n        \r\n                return newApples.filter((apple) => apple.y < 100);\r\n            });\r\n        \r\n            checkCollisions();\r\n            drawGame();\r\n        }\r\n    \r\n        animationFrameRef.current = requestAnimationFrame(gameLoop);\r\n    }, [checkCollisions, drawGame]);\r\n\r\n    useEffect(() => {\r\n        if (gameStarted && imagesLoaded) {\r\n            if (backgroundMusicRef.current) {\r\n                backgroundMusicRef.current.play().catch(error => console.error(\"Error playing audio:\", error));\r\n            }\r\n            animationFrameRef.current = requestAnimationFrame(gameLoop);\r\n        } else {\r\n            if (animationFrameRef.current) {\r\n                cancelAnimationFrame(animationFrameRef.current);\r\n            }\r\n            if (backgroundMusicRef.current) {\r\n                backgroundMusicRef.current.pause();\r\n            }\r\n        }\r\n\r\n        return () => {\r\n            if (animationFrameRef.current) {\r\n                cancelAnimationFrame(animationFrameRef.current);\r\n            }\r\n        };\r\n    }, [gameStarted, gameLoop, imagesLoaded]);\r\n\r\n    useEffect(() => {\r\n        if (gameStarted && time > 0) {\r\n            const timer = setInterval(() => {\r\n                setTime((prevTime) => prevTime - 1);\r\n            }, 1000);\r\n\r\n            return () => clearInterval(timer);\r\n        } else if (time === 0) {\r\n            endGame();\r\n        }\r\n    }, [gameStarted, time]);\r\n\r\n    const movePlayer = useCallback((e) => {\r\n        if (gameStarted) {\r\n            const touch = e.touches[0];\r\n            const newPosition = (touch.clientX / window.innerWidth) * 100;\r\n            setPlayerPosition(newPosition);\r\n        }\r\n    }, [gameStarted]);\r\n\r\n    const startGame = () => {\r\n        setGameStarted(true);\r\n        setScore(0);\r\n        setTime(60);\r\n        setApples([]);\r\n        setShowResult(false);\r\n        lastUpdateTimeRef.current = 0;\r\n        if (buttonClickSoundRef.current) {\r\n            buttonClickSoundRef.current.play().catch(error => console.error(\"Error playing audio:\", error));\r\n        }\r\n    };\r\n\r\n    const endGame = () => {\r\n        setGameStarted(false);\r\n        setShowResult(true);\r\n        if (backgroundMusicRef.current) {\r\n            backgroundMusicRef.current.pause();\r\n        }\r\n    };\r\n\r\n    const handleResultClose = () => {\r\n        setShowResult(false);\r\n        onGameOver(score);\r\n        if (buttonClickSoundRef.current) {\r\n            buttonClickSoundRef.current.play().catch(error => console.error(\"Error playing audio:\", error));\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"apple-catcher\" onTouchMove={movePlayer}>\r\n            <canvas ref={canvasRef} />\r\n            {!imagesLoaded && <div>Loading...</div>}\r\n            {!gameStarted && !showResult && imagesLoaded && (\r\n                <button className=\"start-button\" onClick={startGame}>Start Game</button>\r\n            )}\r\n            {showResult && (\r\n                <div className=\"result-modal\">\r\n                    <div className=\"result-content\">\r\n                        <h2>Game end!</h2>\r\n                        <p>Your score: {score}</p>\r\n                        <button onClick={handleResultClose}>OK</button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AppleCatcher;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;AACvE,OAAO,oBAAoB;;AAE3B;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,SAAS,GAAIC,GAAG,IAAK;EACvB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACpC,MAAMC,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;IACvBD,GAAG,CAACE,MAAM,GAAG,MAAMJ,OAAO,CAACE,GAAG,CAAC;IAC/BA,GAAG,CAACG,OAAO,GAAGJ,MAAM;IACpBC,GAAG,CAACJ,GAAG,GAAGA,GAAG;EACjB,CAAC,CAAC;AACN,CAAC;AAED,MAAMQ,YAAY,GAAGA,CAAC;EAAEC;AAAW,CAAC,KAAK;EAAAC,EAAA;EACrC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGnB,QAAQ,CAAC,CAAC,CAAC;EACrC,MAAM,CAACoB,IAAI,EAAEC,OAAO,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACsB,MAAM,EAAEC,SAAS,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACwB,cAAc,EAAEC,iBAAiB,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAAC0B,WAAW,EAAEC,cAAc,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC4B,UAAU,EAAEC,aAAa,CAAC,GAAG7B,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAAC8B,YAAY,EAAEC,eAAe,CAAC,GAAG/B,QAAQ,CAAC,KAAK,CAAC;EAEvD,MAAMgC,SAAS,GAAG9B,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM+B,kBAAkB,GAAG/B,MAAM,CAAC,IAAI,CAAC;EACvC,MAAMgC,mBAAmB,GAAGhC,MAAM,CAAC,IAAI,CAAC;EACxC,MAAMiC,iBAAiB,GAAGjC,MAAM,CAAC,CAAC,CAAC;EACnC,MAAMkC,iBAAiB,GAAGlC,MAAM,CAAC,IAAI,CAAC;EACtC,MAAMmC,SAAS,GAAGnC,MAAM,CAAC;IACrBoC,SAAS,EAAE,IAAI;IACfC,WAAW,EAAE,IAAI;IACjBC,OAAO,EAAE;EACb,CAAC,CAAC;EAEFvC,SAAS,CAAC,MAAM;IACZ,MAAMwC,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC3B,IAAI;QACA,MAAM,CAACH,SAAS,EAAEC,WAAW,EAAEC,OAAO,CAAC,GAAG,MAAMhC,OAAO,CAACkC,GAAG,CAAC,CACxDpC,SAAS,CAAC,sBAAsB,CAAC,EACjCA,SAAS,CAAC,wBAAwB,CAAC,EACnCA,SAAS,CAAC,mBAAmB,CAAC,CACjC,CAAC;QACF+B,SAAS,CAACM,OAAO,GAAG;UAAEL,SAAS;UAAEC,WAAW;UAAEC;QAAQ,CAAC;QACvDT,eAAe,CAAC,IAAI,CAAC;MACzB,CAAC,CAAC,OAAOa,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9C;MACJ;IACJ,CAAC;IAEDH,UAAU,CAAC,CAAC;IAEZ,MAAMK,MAAM,GAAGd,SAAS,CAACW,OAAO;IAChC,IAAIG,MAAM,EAAE;MACRA,MAAM,CAACC,KAAK,GAAGC,MAAM,CAACC,UAAU;MAChCH,MAAM,CAACI,MAAM,GAAGF,MAAM,CAACG,WAAW;IACtC;IAEAlB,kBAAkB,CAACU,OAAO,GAAG,IAAIS,KAAK,CAAC,8BAA8B,CAAC;IACtEnB,kBAAkB,CAACU,OAAO,CAACU,IAAI,GAAG,IAAI;IACtCnB,mBAAmB,CAACS,OAAO,GAAG,IAAIS,KAAK,CAAC,0BAA0B,CAAC;IAEnE,OAAO,MAAM;MACT,IAAInB,kBAAkB,CAACU,OAAO,EAAE;QAC5BV,kBAAkB,CAACU,OAAO,CAACW,KAAK,CAAC,CAAC;QAClCrB,kBAAkB,CAACU,OAAO,GAAG,IAAI;MACrC;MACA,IAAIT,mBAAmB,CAACS,OAAO,EAAE;QAC7BT,mBAAmB,CAACS,OAAO,GAAG,IAAI;MACtC;IACJ,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMY,eAAe,GAAGpD,WAAW,CAAC,MAAM;IACtCoB,SAAS,CAAEiC,UAAU,IACjBA,UAAU,CAACC,MAAM,CAAEC,KAAK,IAAK;MACzB,IACIA,KAAK,CAACC,CAAC,GAAG,EAAE,IACZD,KAAK,CAACC,CAAC,GAAG,EAAE,IACZC,IAAI,CAACC,GAAG,CAACH,KAAK,CAACI,CAAC,GAAGtC,cAAc,CAAC,GAAG,EAAE,EACzC;QACE,MAAMuC,WAAW,GAAGL,KAAK,CAACM,IAAI,KAAK,MAAM,GAAG,EAAE,GAAG,CAAC,EAAE;QACpD7C,QAAQ,CAAE8C,SAAS,IAAKA,SAAS,GAAGF,WAAW,CAAC;QAChD,OAAO,KAAK;MAChB;MACA,OAAOL,KAAK,CAACC,CAAC,GAAG,GAAG;IACxB,CAAC,CACL,CAAC;EACL,CAAC,EAAE,CAACnC,cAAc,CAAC,CAAC;EAEpB,MAAM0C,QAAQ,GAAG/D,WAAW,CAAC,MAAM;IAC/B,MAAM2C,MAAM,GAAGd,SAAS,CAACW,OAAO;IAChC,IAAI,CAACG,MAAM,IAAI,CAAChB,YAAY,EAAE;IAE9B,MAAMqC,GAAG,GAAGrB,MAAM,CAACsB,UAAU,CAAC,IAAI,CAAC;IACnCD,GAAG,CAACE,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEvB,MAAM,CAACC,KAAK,EAAED,MAAM,CAACI,MAAM,CAAC;;IAEhD;IACA5B,MAAM,CAACgD,OAAO,CAAEZ,KAAK,IAAK;MACtB,MAAM/C,GAAG,GAAG+C,KAAK,CAACM,IAAI,KAAK,MAAM,GAAG3B,SAAS,CAACM,OAAO,CAACL,SAAS,GAAGD,SAAS,CAACM,OAAO,CAACJ,WAAW;MAC/F4B,GAAG,CAACI,SAAS,CAAC5D,GAAG,EAAE+C,KAAK,CAACI,CAAC,GAAGhB,MAAM,CAACC,KAAK,GAAG,GAAG,EAAEW,KAAK,CAACC,CAAC,GAAGb,MAAM,CAACI,MAAM,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;IAC3F,CAAC,CAAC;;IAEF;IACAiB,GAAG,CAACI,SAAS,CAAClC,SAAS,CAACM,OAAO,CAACH,OAAO,EAAEhB,cAAc,GAAGsB,MAAM,CAACC,KAAK,GAAG,GAAG,GAAG,EAAE,EAAED,MAAM,CAACI,MAAM,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;;IAE9G;IACAiB,GAAG,CAACK,IAAI,GAAG,YAAY;IACvBL,GAAG,CAACM,SAAS,GAAG,OAAO;IACvBN,GAAG,CAACO,QAAQ,CAAC,UAAUxD,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;IACvCiD,GAAG,CAACO,QAAQ,CAAC,SAAStD,IAAI,EAAE,EAAE0B,MAAM,CAACC,KAAK,GAAG,GAAG,EAAE,EAAE,CAAC;EACzD,CAAC,EAAE,CAACzB,MAAM,EAAEE,cAAc,EAAEN,KAAK,EAAEE,IAAI,EAAEU,YAAY,CAAC,CAAC;EAEvD,MAAM6C,QAAQ,GAAGxE,WAAW,CAAEyE,SAAS,IAAK;IACxC,IAAI,CAACzC,iBAAiB,CAACQ,OAAO,EAAE;MAC5BR,iBAAiB,CAACQ,OAAO,GAAGiC,SAAS;IACzC;IACA,MAAMC,SAAS,GAAGD,SAAS,GAAGzC,iBAAiB,CAACQ,OAAO;IAEvD,IAAIkC,SAAS,IAAI,EAAE,EAAE;MAAE;MACnB1C,iBAAiB,CAACQ,OAAO,GAAGiC,SAAS;MAErCrD,SAAS,CAAEiC,UAAU,IAAK;QACtB,MAAMsB,SAAS,GAAGtB,UAAU,CAACuB,GAAG,CAAErB,KAAK,KAAM;UACzC,GAAGA,KAAK;UACRC,CAAC,EAAED,KAAK,CAACC,CAAC,GAAG,GAAG,IAAIkB,SAAS,GAAG,EAAE;QACtC,CAAC,CAAC,CAAC;QAEH,IAAIjB,IAAI,CAACoB,MAAM,CAAC,CAAC,GAAG,IAAI,IAAIF,SAAS,CAACG,MAAM,GAAG,CAAC,EAAE;UAC9CH,SAAS,CAACI,IAAI,CAAC;YACXC,EAAE,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;YACdvB,CAAC,EAAEF,IAAI,CAACoB,MAAM,CAAC,CAAC,GAAG,GAAG;YACtBrB,CAAC,EAAE,CAAC;YACJK,IAAI,EAAEJ,IAAI,CAACoB,MAAM,CAAC,CAAC,GAAG,GAAG,GAAG,MAAM,GAAG;UACzC,CAAC,CAAC;QACN;QAEA,OAAOF,SAAS,CAACrB,MAAM,CAAEC,KAAK,IAAKA,KAAK,CAACC,CAAC,GAAG,GAAG,CAAC;MACrD,CAAC,CAAC;MAEFJ,eAAe,CAAC,CAAC;MACjBW,QAAQ,CAAC,CAAC;IACd;IAEA9B,iBAAiB,CAACO,OAAO,GAAG2C,qBAAqB,CAACX,QAAQ,CAAC;EAC/D,CAAC,EAAE,CAACpB,eAAe,EAAEW,QAAQ,CAAC,CAAC;EAE/BjE,SAAS,CAAC,MAAM;IACZ,IAAIyB,WAAW,IAAII,YAAY,EAAE;MAC7B,IAAIG,kBAAkB,CAACU,OAAO,EAAE;QAC5BV,kBAAkB,CAACU,OAAO,CAAC4C,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC5C,KAAK,IAAIC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC,CAAC;MAClG;MACAR,iBAAiB,CAACO,OAAO,GAAG2C,qBAAqB,CAACX,QAAQ,CAAC;IAC/D,CAAC,MAAM;MACH,IAAIvC,iBAAiB,CAACO,OAAO,EAAE;QAC3B8C,oBAAoB,CAACrD,iBAAiB,CAACO,OAAO,CAAC;MACnD;MACA,IAAIV,kBAAkB,CAACU,OAAO,EAAE;QAC5BV,kBAAkB,CAACU,OAAO,CAACW,KAAK,CAAC,CAAC;MACtC;IACJ;IAEA,OAAO,MAAM;MACT,IAAIlB,iBAAiB,CAACO,OAAO,EAAE;QAC3B8C,oBAAoB,CAACrD,iBAAiB,CAACO,OAAO,CAAC;MACnD;IACJ,CAAC;EACL,CAAC,EAAE,CAACjB,WAAW,EAAEiD,QAAQ,EAAE7C,YAAY,CAAC,CAAC;EAEzC7B,SAAS,CAAC,MAAM;IACZ,IAAIyB,WAAW,IAAIN,IAAI,GAAG,CAAC,EAAE;MACzB,MAAMsE,KAAK,GAAGC,WAAW,CAAC,MAAM;QAC5BtE,OAAO,CAAEuE,QAAQ,IAAKA,QAAQ,GAAG,CAAC,CAAC;MACvC,CAAC,EAAE,IAAI,CAAC;MAER,OAAO,MAAMC,aAAa,CAACH,KAAK,CAAC;IACrC,CAAC,MAAM,IAAItE,IAAI,KAAK,CAAC,EAAE;MACnB0E,OAAO,CAAC,CAAC;IACb;EACJ,CAAC,EAAE,CAACpE,WAAW,EAAEN,IAAI,CAAC,CAAC;EAEvB,MAAM2E,UAAU,GAAG5F,WAAW,CAAE6F,CAAC,IAAK;IAClC,IAAItE,WAAW,EAAE;MACb,MAAMuE,KAAK,GAAGD,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC;MAC1B,MAAMC,WAAW,GAAIF,KAAK,CAACG,OAAO,GAAGpD,MAAM,CAACC,UAAU,GAAI,GAAG;MAC7DxB,iBAAiB,CAAC0E,WAAW,CAAC;IAClC;EACJ,CAAC,EAAE,CAACzE,WAAW,CAAC,CAAC;EAEjB,MAAM2E,SAAS,GAAGA,CAAA,KAAM;IACpB1E,cAAc,CAAC,IAAI,CAAC;IACpBR,QAAQ,CAAC,CAAC,CAAC;IACXE,OAAO,CAAC,EAAE,CAAC;IACXE,SAAS,CAAC,EAAE,CAAC;IACbM,aAAa,CAAC,KAAK,CAAC;IACpBM,iBAAiB,CAACQ,OAAO,GAAG,CAAC;IAC7B,IAAIT,mBAAmB,CAACS,OAAO,EAAE;MAC7BT,mBAAmB,CAACS,OAAO,CAAC4C,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC5C,KAAK,IAAIC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC,CAAC;IACnG;EACJ,CAAC;EAED,MAAMkD,OAAO,GAAGA,CAAA,KAAM;IAClBnE,cAAc,CAAC,KAAK,CAAC;IACrBE,aAAa,CAAC,IAAI,CAAC;IACnB,IAAII,kBAAkB,CAACU,OAAO,EAAE;MAC5BV,kBAAkB,CAACU,OAAO,CAACW,KAAK,CAAC,CAAC;IACtC;EACJ,CAAC;EAED,MAAMgD,iBAAiB,GAAGA,CAAA,KAAM;IAC5BzE,aAAa,CAAC,KAAK,CAAC;IACpBb,UAAU,CAACE,KAAK,CAAC;IACjB,IAAIgB,mBAAmB,CAACS,OAAO,EAAE;MAC7BT,mBAAmB,CAACS,OAAO,CAAC4C,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC5C,KAAK,IAAIC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC,CAAC;IACnG;EACJ,CAAC;EAED,oBACIvC,OAAA;IAAKkG,SAAS,EAAC,eAAe;IAACC,WAAW,EAAET,UAAW;IAAAU,QAAA,gBACnDpG,OAAA;MAAQqG,GAAG,EAAE1E;IAAU;MAAA2E,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EACzB,CAAChF,YAAY,iBAAIzB,OAAA;MAAAoG,QAAA,EAAK;IAAU;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,EACtC,CAACpF,WAAW,IAAI,CAACE,UAAU,IAAIE,YAAY,iBACxCzB,OAAA;MAAQkG,SAAS,EAAC,cAAc;MAACQ,OAAO,EAAEV,SAAU;MAAAI,QAAA,EAAC;IAAU;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAC1E,EACAlF,UAAU,iBACPvB,OAAA;MAAKkG,SAAS,EAAC,cAAc;MAAAE,QAAA,eACzBpG,OAAA;QAAKkG,SAAS,EAAC,gBAAgB;QAAAE,QAAA,gBAC3BpG,OAAA;UAAAoG,QAAA,EAAI;QAAS;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAClBzG,OAAA;UAAAoG,QAAA,GAAG,cAAY,EAACvF,KAAK;QAAA;UAAAyF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC1BzG,OAAA;UAAQ0G,OAAO,EAAET,iBAAkB;UAAAG,QAAA,EAAC;QAAE;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9C;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CACR;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd,CAAC;AAAC7F,EAAA,CA7NIF,YAAY;AAAAiG,EAAA,GAAZjG,YAAY;AA+NlB,eAAeA,YAAY;AAAC,IAAAiG,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}